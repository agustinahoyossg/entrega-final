"use strict";(self["webpackChunk_1er_proyecto_final_hoyos"]=self["webpackChunk_1er_proyecto_final_hoyos"]||[]).push([[177],{2493:function(t,a,e){e.d(a,{Z:function(){return c}});var s=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"navBar"}},[a("nav",{staticClass:"navbar navbar-dark bg-dark fixed-top"},[t._m(0),a("div",{staticClass:"d-flex align-items-center"},[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),"usuario"===t.getActiveUser.type?a("router-link",{attrs:{to:"/user"}},[t._v("Usuario")]):t._e(),"admin"===t.getActiveUser.type?a("router-link",{attrs:{to:"/admin"}},[t._v("Admin")]):t._e(),a("button",{staticClass:"btn btn-danger ml-4",on:{click:function(a){return t.logout()}}},[t._v("Cerrar Sesion")])],1)]),a("router-view")],1)},i=[function(){var t=this,a=t._self._c;return a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Underground.svg/1200px-Underground.svg.png",width:"80"}})])}],r=(e(7658),e(3822)),o={name:"NavBar",computed:{...(0,r.Se)(["getActiveUser"])},methods:{...(0,r.OI)(["setUser"]),logout(){this.setUser({name:null,email:null,password:null,id:null,type:null,avatar:null}),"home"!==this.$route.name&&this.$router.push({name:"home"})}}},n=o,l=e(1001),d=(0,l.Z)(n,s,i,!1,null,null,null),c=d.exports},5025:function(t,a,e){e.r(a),e.d(a,{default:function(){return W}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"container-fluid p-0"},[this.getActiveUser.type?a("NavBar"):t._e(),t._m(0),this.getActiveUser.type?t._e():a("div",{staticClass:"contenedor-forms"},[a("LoginComponent"),a("registration-component")],1),this.getActiveUser.type?a("h1",[t._v("Bienvenido "+t._s(this.getActiveUser.type)+": "+t._s(this.getActiveUser.name))]):t._e(),"usuario"===this.getActiveUser.type?a("ProductList"):t._e(),"usuario"===this.getActiveUser.type?a("Cart",{attrs:{id:"carrito"}}):t._e(),"admin"===this.getActiveUser.type?a("ListaPedidos"):t._e(),"usuario"===this.getActiveUser.type&&this.getCarrito.length>0?a("a",{staticClass:"btn btn-warning flotante",attrs:{href:"#carrito"}},[t._v("VER CARRITO")]):t._e()],1)},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"banner"},[a("h1",[t._v("London Underground")]),a("h2",[t._v("Tu sitio de tickets online")])])}],r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"componente-login m-5 w-25"},[a("h3",{staticClass:"mb-4"},[t._v("Login")]),a("form",{attrs:{id:"formulario-login",action:"",autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.validarUsuario.apply(null,arguments)}}},[a("input",{staticStyle:{display:"none"},attrs:{autocomplete:"false",name:"hidden",type:"text"}}),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Usuario","aria-label":"Usuario","aria-describedby":"basic-addon1"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}})]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Contraseña","aria-label":"Contraseña","aria-describedby":"basic-addon2"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),t._m(0)]),t._m(1)])},o=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"input-group mb-3"},[a("input",{staticClass:"btn btn-warning",attrs:{type:"submit",value:"Ingresar","aria-label":"Login","aria-describedby":"basic-addon2"}})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[a("h5",[t._v(" Usario de prueba: ")]),a("p",[t._v(" email: yamiusu@yahoo.com password: yamiusu23 ")]),a("h5",[t._v(" Admin de prueba: ")]),a("p",[t._v(" email: admin@eventos.com password: admin2023 ")]),a("a",{staticClass:"alert-link",attrs:{target:"_blank",href:"https://mockapi.io/projects/63a21bbcba35b96522f039e3"}},[t._v("Mockupi link")])])}],n=e(3822),l={name:"LoginComponent",data(){return{usuarios:[],email:"",password:"",existeUsuario:!1,existeAdmin:!1}},created(){this.getUsersApi()},computed:{...(0,n.Se)(["getAllUsers","getActiveUser"])},methods:{...(0,n.nv)(["getUsersApi"]),...(0,n.OI)(["setUser"]),validarUsuario(){const t=this.getAllUsers.filter((t=>t.email===this.email&&t.password===this.password));1===t.length?this.setUser(t[0]):(this.setUser(null),alert("El usuario no existe, por favor registrate"))}}},d=l,c=e(1001),u=(0,c.Z)(d,r,o,!1,null,"27fb73ad",null),m=u.exports,p=function(){var t=this,a=t._self._c;return a("div",{staticClass:"componente-login m-5 w-25"},[a("h3",{staticClass:"mb-4"},[t._v("Registrarse")]),a("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return t.registrarUsuario()}}},[a("input",{staticStyle:{display:"none"},attrs:{autocomplete:"false",name:"hidden",type:"text"}}),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nueuvoUsuario.name,expression:"nueuvoUsuario.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre","aria-label":"Nombre","aria-describedby":"basic-addon1"},domProps:{value:t.nueuvoUsuario.name},on:{input:function(a){a.target.composing||t.$set(t.nueuvoUsuario,"name",a.target.value)}}})]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nueuvoUsuario.avatar,expression:"nueuvoUsuario.avatar"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Avatar(link de imagen)","aria-label":"Avatar","aria-describedby":"basic-addon1"},domProps:{value:t.nueuvoUsuario.avatar},on:{input:function(a){a.target.composing||t.$set(t.nueuvoUsuario,"avatar",a.target.value)}}})]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nueuvoUsuario.email,expression:"nueuvoUsuario.email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Usuario (tu email)","aria-label":"Usuario","aria-describedby":"basic-addon1"},domProps:{value:t.nueuvoUsuario.email},on:{input:function(a){a.target.composing||t.$set(t.nueuvoUsuario,"email",a.target.value)}}})]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nueuvoUsuario.password,expression:"nueuvoUsuario.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Contraseña","aria-label":"Contraseña","aria-describedby":"basic-addon2"},domProps:{value:t.nueuvoUsuario.password},on:{input:function(a){a.target.composing||t.$set(t.nueuvoUsuario,"password",a.target.value)}}})]),t._m(0)]),t.mensaje?a("p",[t._v(t._s(t.mensaje))]):t._e()])},v=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"input-group mb-3"},[a("input",{staticClass:"btn btn-warning",attrs:{type:"submit","aria-label":"Registrarse","aria-describedby":"basic-addon2"}})])}],h={name:"RegistrationComponent",data(){return{nueuvoUsuario:{name:"",avatar:"",email:"",password:"",type:"usuario"},mensaje:null}},methods:{...(0,n.OI)(["setNewUser"]),...(0,n.nv)(["registrarNuevoUsuario","getUsersApi"]),registrarUsuario:function(){this.setNewUser(this.nueuvoUsuario),this.registrarNuevoUsuario(),this.mensaje="Tu usuario fue registrado exitosamente. Ya podes loguearte con tus credenciales."}}},_=h,b=(0,c.Z)(_,p,v,!1,null,null,null),C=b.exports,g=function(){var t=this,a=t._self._c;return a("div",{staticClass:"cards-wrapper"},[t._l(this.getListaEventos,(function(t,e){return a("ProductCard",{key:e,staticClass:"m-4",attrs:{detalle:t}})})),0===this.getListaEventos.length?a("h2",[t._v("Lo sentimos, en este momento no hay eventos disponibles.")]):t._e()],2)},f=[],U=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-3"},[a("div",{staticClass:"cards-container"},[a("div",{staticClass:"card"},[a("img",{staticClass:"card-img-top card-img",attrs:{src:t.detalle.image,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(t.detalle.name))]),a("p",{staticClass:"card-text"},[t._v("En "+t._s(t.detalle.eventplace))])]),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[t._v(t._s(t.detalle.date))]),a("li",{staticClass:"list-group-item"},[t._v("Valor: £ "+t._s(t.detalle.price))])]),a("div",{staticClass:"card-body"},[a("button",{staticClass:"card-link btn btn-primary",on:{click:function(a){return t.abrirDetalle()}}},[t._v("+ Info")]),a("button",{staticClass:"card-link btn btn-warning",on:{click:t.addToCart}},[a("svg",{staticClass:"bi bi-cart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}})]),t._v(" Añadir ")])])]),t.modal?a("div",{staticClass:"product-modal-wrapper"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h2",{staticClass:"modal-title text-warning"},[t._v(t._s(t.detalle.name))]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.abrirDetalle}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("ProductDetail",{attrs:{detalle:t.detalle},on:{clickCantidad:function(a){t.cantidad=a}}}),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.addToCart}},[t._v("Añadir al carrito")])])],1)]):t._e()])])},y=[],w=function(){var t=this,a=t._self._c;return a("div",{},[a("div",{staticClass:"cards-container"},[a("div",{staticClass:"card d-flex flex-row text-white bg-dark"},[a("img",{staticClass:"card-img-top card-img",attrs:{src:t.detalle.image,alt:"Card image cap"}}),a("div",{staticClass:"d-flex flex-column p-5"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"card-text"},[t._v("En "+t._s(t.detalle.eventplace))]),a("p",{staticClass:"card-text"},[t._v("Capacidad: "+t._s(t.detalle.capacity))])]),a("ul",{staticClass:"list-group list-group-flush text-dark"},[a("li",{staticClass:"list-group-item"},[t._v("Fecha: "+t._s(t.detalle.date))]),a("li",{staticClass:"list-group-item"},[t._v("Apertura puertas: "+t._s(t.detalle.doorsopenat)+" HS")]),a("li",{staticClass:"list-group-item"},[t._v("Valor: £ "+t._s(t.detalle.price))])]),a("div",{staticClass:"card-body"},[a("p",[t._v(t._s(t.detalle.description))]),a("p",[t._v("Cantidad: "+t._s(t.cantidad))]),a("a",{staticClass:"card-link btn btn-success",on:{click:t.sumar}},[t._v("+")]),a("a",{staticClass:"card-link btn btn-danger",on:{click:t.restar}},[t._v("-")])])])])])])},k=[],A={name:"ProductDetail",data(){return{cantidad:1}},props:{detalle:Object},beforeDestroy(){this.cantidad=1,this.$emit("clickCantidad",this.cantidad)},methods:{...(0,n.OI)(["setCantidadElemento"]),...(0,n.Se)(["getCarrito"]),sumar(){this.cantidad+=1,this.$emit("clickCantidad",this.cantidad)},restar(){this.cantidad>1&&(this.cantidad-=1),this.$emit("clickCantidad",this.cantidad)}}},x=A,P=(0,c.Z)(x,w,k,!1,null,"21eb78c0",null),E=P.exports,L={name:"ProductCard",data(){return{modal:!1,cantidad:1}},components:{ProductDetail:E},props:{detalle:Object},methods:{...(0,n.OI)(["añadirAlCarrito","setCantidadElemento"]),...(0,n.Se)(["getCarrito","getActiveUser"]),...(0,n.nv)(["modificarEventoApi"]),abrirDetalle(){this.modal=!this.modal,this.cantidad=1},addToCart(){var t=this.getCarrito().findIndex((t=>t.id===this.detalle.id));if(-1!==t){let a=1;while(a<=this.cantidad)this.setCantidadElemento(t),a++}else{let t=this.detalle;const a=this.cantidad;t.cantidad=a,this.añadirAlCarrito(t)}this.modal=!1}}},N=L,T=(0,c.Z)(N,U,y,!1,null,"1fafeff4",null),R=T.exports,I={name:"ProductList",components:{ProductCard:R},data(){return{eventoObject:{}}},created(){this.getProductListApi()},computed:{...(0,n.Se)(["getListaEventos"])},methods:{...(0,n.nv)(["getProductListApi"])}},S=I,D=(0,c.Z)(S,g,f,!1,null,"1084697a",null),O=D.exports,Z=e(2493),$=function(){var t=this,a=t._self._c;return a("div",{staticClass:"mt-5 componente"},[this.getCarrito.length>0?a("h3",[t._v("Carrito de compras")]):t._e(),this.getCarrito.length>0?a("table",{staticClass:"table table-dark mt-2"},[t._m(0),a("tbody",t._l(this.getCarrito,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.date))]),a("td",[t._v("£ "+t._s(e.price))]),a("td",[t._v(t._s(e.cantidad))]),a("td",[t._v("£ "+t._s(t.sumarAlTotal(e.price,e.cantidad,e.id)))]),a("td",[a("button",{staticClass:"btn btn-success mr-2",on:{click:function(a){return t.sumar(s)}}},[t._v("+")]),a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.restar(s)}}},[t._v("-")])])])})),0)]):t._e(),this.getCarrito.length>0?a("table",{staticClass:"table table-dark mt-2"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("TOTAL £ "+t._s(t.total))])])])]):t._e(),this.getCarrito.length>0?a("table",{staticClass:"table table-dark mt-2"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[a("button",{staticClass:"btn btn-warning",on:{click:function(a){return t.enviarPedido()}}},[t._v("Finalizar compra")])])])])]):t._e(),a("table",{staticClass:"table table-dark mt-2"},[a("thead",[a("tr",[t.pedidoEnviado?a("th",{attrs:{scope:"col"}},[t._v("Tu pedido fue enviado con exito!"),a("button",{staticClass:"btn btn-success ml-3",on:{click:function(a){t.pedidoEnviado=!1}}},[t._v(" X")])]):t._e()])])])])},j=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Evento")]),a("th",{attrs:{scope:"col"}},[t._v("Fecha")]),a("th",{attrs:{scope:"col"}},[t._v("Precio")]),a("th",{attrs:{scope:"col"}},[t._v("Cantidad")]),a("th",{attrs:{scope:"col"}},[t._v("Total")]),a("th",{attrs:{scope:"col"}},[t._v("Agregar/Eliminar")])])])}],H=(e(7658),{name:"MyCart",data(){return{total:0,cantidad:1,precios:[],pedidoEnviado:!1}},computed:{...(0,n.Se)(["getCarrito","getActiveUser"])},methods:{...(0,n.OI)(["setCantidadElementoRestar","setCantidadElemento","setCarritoVacio","setCompra"]),...(0,n.nv)(["enviarCompra"]),sumar(t){this.setCantidadElemento(t)},restar(t){this.setCantidadElementoRestar(t)},sumarAlTotal(t,a,e){const s=this.precios.findIndex((t=>t.id===e));return s>-1?this.precios[s].total=t*a:this.precios.push({total:t*a,id:e}),this.sumarTotalPrecios(),t*a},sumarTotalPrecios(){let t=this.precios.map((t=>t.total)).reduce(((t,a)=>t+a));this.total=t},enviarPedido(){this.pedidoEnviado=!0;const t={pedido:this.getCarrito,usuario:this.getActiveUser,total:this.total};this.setCompra(t),this.enviarCompra(),this.total=0,this.precios=[],this.setCarritoVacio(),this.setCompra({})}}}),z=H,B=(0,c.Z)(z,$,j,!1,null,"02c2710f",null),V=B.exports,F=function(){var t=this,a=t._self._c;return a("div",{staticClass:"mt-5 componente"},[a("h3",[t._v("Lista de pedidos recibidos")]),this.getComprasRecibidas.length>0?a("table",{staticClass:"table table-dark mt-2"},[t._m(0),a("tbody",t._l(this.getComprasRecibidas,(function(e,s){return a("tr",{key:s,staticClass:"mb-3"},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(t.formatearFecha(e.createdAt)))]),a("td",[t._v(t._s(e.usuario.name))]),a("td",[t._v(t._s(e.usuario.email))]),a("table",{staticClass:"table-bordered table-sm"},[t._m(1,!0),t._l(e.pedido,(function(e,s){return a("tr",{key:s},[a("td",[t._v(" "+t._s(e.name)+" ")]),a("td",[t._v(" id: "+t._s(e.id)+" ")]),a("td",[t._v(" £ "+t._s(e.price)+" ")]),a("td",[t._v(" "+t._s(e.cantidad)+" unidades ")])])}))],2),a("td",[t._v("£ "+t._s(e.total))]),a("td",{},[a("button",{staticClass:"btn btn-success mb-2",on:{click:function(a){return t.procesar(e.id)}}},[t._v("Entregado")]),a("button",{staticClass:"btn btn-danger mb-2 ml-3",on:{click:function(a){return t.procesar(e.id)}}},[t._v("Cancelar pedido")])])])})),0)]):t._e()])},M=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",{staticClass:"table-active"},[a("th",{attrs:{scope:"col"}},[t._v("ID de Compra")]),a("th",{attrs:{scope:"col"}},[t._v("Fecha de compra")]),a("th",{attrs:{scope:"col"}},[t._v("Nombre de usuario")]),a("th",{attrs:{scope:"col"}},[t._v("Email de usuario")]),a("th",{attrs:{scope:"col"}},[t._v("Datos de la compra")]),a("th",{attrs:{scope:"col"}},[t._v("Total Compra")]),a("th",{attrs:{scope:"col"}},[t._v("Procesar")])])])},function(){var t=this,a=t._self._c;return a("thead",{staticClass:"table-active"},[a("th",{attrs:{scope:"col"}},[t._v("Nombre Evento")]),a("th",{attrs:{scope:"col"}},[t._v("Id evento")]),a("th",{attrs:{scope:"col"}},[t._v("Valor unitario")]),a("th",{attrs:{scope:"col"}},[t._v("Cantidad de entradas")])])}],G={name:"ListaPedidos",data(){return{}},created(){this.getComprasRecibidasApi()},computed:{...(0,n.Se)(["getComprasRecibidas"])},methods:{...(0,n.nv)(["getComprasRecibidasApi","eliminarCompraApi"]),formatearFecha(t){let a=new Date(Date.parse(t));return a.toLocaleString("en-GB")},procesar(t){this.eliminarCompraApi(t)}}},X=G,Y=(0,c.Z)(X,F,M,!1,null,"a5a57188",null),q=Y.exports,J={name:"HomeView",components:{LoginComponent:m,RegistrationComponent:C,ProductList:O,NavBar:Z.Z,Cart:V,ListaPedidos:q},computed:{...(0,n.Se)(["getActiveUser","getCarrito"])}},K=J,Q=(0,c.Z)(K,s,i,!1,null,"5fd18dff",null),W=Q.exports}}]);
//# sourceMappingURL=home.ac37576e.js.map